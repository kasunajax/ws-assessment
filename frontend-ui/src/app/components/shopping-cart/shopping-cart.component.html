


<div *ngIf="(cart$ | async) as cart"
  fxLayout="column" fxLayoutAlign="start center" fxLayoutGap="20px"
>
  <h2>Cart</h2>

  <mat-card *ngIf="(lineItems$ | async).length == 0">
    <mat-card-header>
      <mat-card-title>No items in the cart !</mat-card-title>
    </mat-card-header>
  </mat-card>

  <mat-card *ngFor="let lineItem of lineItems$ | async " style="width: 100%">

    <mat-card-header style= "width: 100%" >
      <mat-card-title>{{lineItem.product.name}}</mat-card-title>
      <mat-card-subtitle >
        <mat-form-field appearance="outline" style="width: 100%; margin-top: 10px">
          <mat-label>Total quantity in units</mat-label>
          <input matInput class="manual-input" type="number" [value]="lineItem.product.unitsPerCarton * lineItem.numberOfCartons + lineItem.numberOfUnits"  #amt/>
          <span matSuffix>units</span>
        </mat-form-field>
<!--        <input matInput class="manual-input" type="number" [value]="lineItem.product.unitsPerCarton * lineItem.numberOfCartons + lineItem.numberOfUnits"  #amt/>-->
        <button mat-stroked-button class="manual-input-btn"  (click)="updateCart(lineItem.product,amt.value)">Apply</button>
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content >
      <div     fxLayout="center"
               fxLayoutAlign="space-between center"
               fxLayoutGap="10px">


      <div
      fxLayout="column"
      fxLayoutAlign="center center"
      >
        <div class="spinner-label">Cartons:</div>
<!--        <input type="number" [min]="0" [value]="lineItem.numberOfCartons" (change)="updateCart(lineItem.product, numberofCartonsInput.value, numberofUnitsInput.value, cart.lineItems)" #numberofCartonsInput>-->
        <div>
        <button class="control-btn" (click)="setQuantity(lineItem.product, numberofCartonsInput.innerHTML, numberofUnitsInput.innerHTML, -1, 0)">-</button>
        <span class="input-text" #numberofCartonsInput disabled>{{lineItem.numberOfCartons}}</span>
        <button class="control-btn" (click)="setQuantity(lineItem.product, numberofCartonsInput.innerHTML, numberofUnitsInput.innerHTML, +1, 0)">+</button>
        </div>
      </div>
      <div
        fxLayout="column"
        fxLayoutAlign="center center"
      >
        <div class="spinner-label">Units:</div>
<!--        <input type="number" [min]="1" [value]="lineItem.numberOfUnits" (change)="updateCart(lineItem.product, numberofCartonsInput.value, numberofUnitsInput.value, cart.lineItems)" #numberofUnitsInput>-->
        <div>
        <button class="control-btn" (click)="setQuantity(lineItem.product, numberofCartonsInput.innerHTML, numberofUnitsInput.innerHTML, 0, -1)">-</button>
        <span class="input-text" #numberofUnitsInput disabled>{{lineItem.numberOfUnits}}</span>
        <button class="control-btn" (click)="setQuantity(lineItem.product, numberofCartonsInput.innerHTML, numberofUnitsInput.innerHTML, 0, +1)">+</button>
        </div>
      </div>

      <div>
        <button (click)="removeFromCart(lineItem.product, cart.lineItems)" mat-icon-button aria-label="Delete button">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
      </div>
    </mat-card-content>

  </mat-card>
</div>





<!--<h3>Cart Items</h3>-->
<!--<ul *ngIf="(cart$ | async) as cart">-->
<!--  <li *ngFor="let lineItem of cart.lineItems">-->
<!--    {{lineItem.product.name}} :- -->
<!--    <br>-->

<!--    By Cartons: <input type="number" [value]="lineItem.numberOfCartons" #numberofCartonsInput disabled/>-->
<!--    <button (click)="setQuantity(lineItem.product, numberofCartonsInput.value, numberofUnitsInput.value, -1, 0, cart.lineItems)">-</button>-->
<!--    <button (click)="setQuantity(lineItem.product, numberofCartonsInput.value, numberofUnitsInput.value, +1, 0, cart.lineItems)">+</button>-->

<!--    <br>-->
<!--    By Units: <input type="number" [value]="lineItem.numberOfUnits" #numberofUnitsInput disabled/>-->
<!--    <button (click)="setQuantity(lineItem.product, numberofCartonsInput.value, numberofUnitsInput.value, 0, -1, cart.lineItems)">-</button>-->
<!--    <button (click)="setQuantity(lineItem.product, numberofCartonsInput.value, numberofUnitsInput.value, 0, +1, cart.lineItems)">+</button>-->

<!--    <br>-->
<!--    <button (click)="removeFromCart(lineItem.product, cart.lineItems)">X</button>-->
<!--  </li>-->
<!--</ul>-->







<!--<table mat-table [dataSource]="lineItems$ | async" class="mat-elevation-z8">-->

<!--  &lt;!&ndash;- Note that these columns can be defined in any order.-->
<!--        The actual rendered columns are set as a property on the row definition" &ndash;&gt;-->

<!--  &lt;!&ndash; Position Column &ndash;&gt;-->
<!--  <ng-container matColumnDef="name">-->
<!--    <th mat-header-cell *matHeaderCellDef> Name </th>-->
<!--    <td mat-cell *matCellDef="let element"> {{element.product.name}} </td>-->
<!--  </ng-container>-->

<!--  &lt;!&ndash; Position Column &ndash;&gt;-->
<!--  <ng-container matColumnDef="price">-->
<!--    <th mat-header-cell *matHeaderCellDef> Price </th>-->
<!--    <td mat-cell *matCellDef="let element"> {{element.product.price}} </td>-->
<!--  </ng-container>-->

<!--  &lt;!&ndash; Name Column &ndash;&gt;-->
<!--  <ng-container matColumnDef="discounted">-->
<!--    <th mat-header-cell *matHeaderCellDef> Discounted </th>-->
<!--    <td mat-cell *matCellDef="let element"> {{element.discounted}} </td>-->
<!--  </ng-container>-->

<!--  &lt;!&ndash; Weight Column &ndash;&gt;-->
<!--  <ng-container matColumnDef="lineItemTotal">-->
<!--    <th mat-header-cell *matHeaderCellDef> Line Total </th>-->
<!--    <td mat-cell *matCellDef="let element"> {{element.lineItemTotal}} </td>-->
<!--  </ng-container>-->

<!--  &lt;!&ndash; Symbol Column &ndash;&gt;-->
<!--  <ng-container matColumnDef="action">-->
<!--    <th mat-header-cell *matHeaderCellDef> Action </th>-->
<!--    <td mat-cell *matCellDef="let element"> X </td>-->
<!--  </ng-container>-->

<!--  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>-->
<!--  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>-->
<!--</table>-->

